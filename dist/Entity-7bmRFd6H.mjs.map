{"version":3,"file":"Entity-7bmRFd6H.mjs","sources":["../src/Engine/Observer.js","../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/native.js","../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/v4.js","../src/Engine/Entity.js"],"sourcesContent":["class Observer {\r\n  observers;\r\n  events = {};\r\n\r\n  constructor(events = {}) {\r\n    this.observers = [];\r\n    this.events = events;\r\n  }\r\n\r\n  $on(events, callback) {\r\n    if (typeof events == \"string\") {\r\n      events = [events];\r\n    }\r\n\r\n    events.forEach((event) => {\r\n      this.isValidEvent(event);\r\n\r\n      this.observers.push({\r\n        event,\r\n        callback,\r\n      });\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  unset(observer) {\r\n    this.observers = this.observers.filter(function (item) {\r\n      if (item !== observer) {\r\n        return item;\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  $emit(event, ...args) {\r\n    let promises = [];\r\n\r\n    this.observers\r\n      .filter((observer) => observer.event === event)\r\n      .forEach((observer) => {\r\n        promises.push(Promise.resolve(observer.callback(...args)));\r\n      });\r\n\r\n    return Promise.all(promises);\r\n  }\r\n\r\n  isValidEvent(event) {\r\n    if (this.events) {\r\n      if (!Object.keys(this.events).includes(event)) {\r\n        throw new Error(`Event '${event}' is not a valid event`);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Observer;\r\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import { Component, Observer } from \"@/Bundles/Core\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { TransformComponent } from \"@/Bundles/Core/Components\";\r\n\r\nclass Entity {\r\n  uuid = uuid();\r\n  components = new Map();\r\n  transform = new TransformComponent();\r\n  scene;\r\n\r\n  observer = new Observer({ SETUP_FINISHED: \"SETUP_FINISHED\" });\r\n\r\n  constructor(...components) {\r\n    components.forEach((component) => this.addComponent(component));\r\n  }\r\n\r\n  addComponent(component) {\r\n    component.entity = this;\r\n    component.setup();\r\n    this.components.set(component.constructor, component);\r\n  }\r\n\r\n  removeComponent(component) {\r\n    this.components.delete(component.constructor);\r\n  }\r\n\r\n  getComponent(component) {\r\n    let componentClass =\r\n      component instanceof Component ? component.constructor : component;\r\n    return this.components.get(componentClass);\r\n  }\r\n\r\n  update(deltaTime, currentTime) {\r\n    this.loop(deltaTime, currentTime);\r\n    this.components.forEach((component) => {\r\n      component.updateComponent(deltaTime, currentTime);\r\n    });\r\n  }\r\n\r\n  loop(deltaTime, currentTime) {}\r\n}\r\n\r\nexport default Entity;\r\n"],"names":["uuid"],"mappings":"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","x_google_ignoreList":[1,2,3,4]}