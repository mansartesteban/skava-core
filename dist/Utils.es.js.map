{"version":3,"file":"Utils.es.js","sources":["../src/Engine/Lib/Time/Timer.js"],"sourcesContent":["import { Time } from \"@/Bundles/Utils\";\r\n\r\nclass Timer {\r\n  #startTime;\r\n  #time;\r\n\r\n  executionStack = [];\r\n\r\n  constructor() {\r\n    this.#startTime = performance.now();\r\n    this.#time = this.#startTime;\r\n  }\r\n\r\n  get delta() {\r\n    return Time.delta(this.#startTime, performance.now());\r\n  }\r\n\r\n  reset() {\r\n    this.#startTime = performance.now();\r\n    this.#time = this.#startTime;\r\n  }\r\n\r\n  executeAfter(callback, delay) {\r\n    this.executionStack.push({\r\n      delay,\r\n      repeat: false,\r\n      callback,\r\n      lastCall: this.#time,\r\n    });\r\n  }\r\n\r\n  executeEach(delay, callback) {\r\n    this.executionStack.push({\r\n      delay,\r\n      repeat: true,\r\n      callback,\r\n      lastCall: this.#time,\r\n    });\r\n  }\r\n\r\n  watchCallbacks() {\r\n    let itemsToDelete = [];\r\n    this.executionStack.forEach((item, index) => {\r\n      if (!item.repeat) {\r\n        if (this.delta >= item.delay) {\r\n          item.callback();\r\n        }\r\n        itemsToDelete.push(index);\r\n      } else {\r\n        if (Time.delta(this.#time, item.lastCall) >= item.delay) {\r\n          item.callback();\r\n          item.lastCall = this.#time;\r\n        }\r\n      }\r\n    });\r\n\r\n    itemsToDelete.forEach((_, index) => this.executionStack.splice(index, 1));\r\n  }\r\n\r\n  update() {\r\n    this.#time = performance.now();\r\n    this.watchCallbacks();\r\n  }\r\n}\r\n\r\nexport default Timer;\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,MAAM;AAAA,EAMV,cAAc;AALd;AACA;AAEA,0CAAiB,CAAA;AAGf,uBAAK,YAAa,YAAY;AAC9B,uBAAK,OAAQ,mBAAK;AAAA,EACnB;AAAA,EAED,IAAI,QAAQ;AACV,WAAO,KAAK,MAAM,mBAAK,aAAY,YAAY,IAAG,CAAE;AAAA,EACrD;AAAA,EAED,QAAQ;AACN,uBAAK,YAAa,YAAY;AAC9B,uBAAK,OAAQ,mBAAK;AAAA,EACnB;AAAA,EAED,aAAa,UAAU,OAAO;AAC5B,SAAK,eAAe,KAAK;AAAA,MACvB;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,MACA,UAAU,mBAAK;AAAA,IACrB,CAAK;AAAA,EACF;AAAA,EAED,YAAY,OAAO,UAAU;AAC3B,SAAK,eAAe,KAAK;AAAA,MACvB;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,MACA,UAAU,mBAAK;AAAA,IACrB,CAAK;AAAA,EACF;AAAA,EAED,iBAAiB;AACf,QAAI,gBAAgB,CAAA;AACpB,SAAK,eAAe,QAAQ,CAAC,MAAM,UAAU;AAC3C,UAAI,CAAC,KAAK,QAAQ;AAChB,YAAI,KAAK,SAAS,KAAK,OAAO;AAC5B,eAAK,SAAQ;AAAA,QACd;AACD,sBAAc,KAAK,KAAK;AAAA,MAChC,OAAa;AACL,YAAI,KAAK,MAAM,mBAAK,QAAO,KAAK,QAAQ,KAAK,KAAK,OAAO;AACvD,eAAK,SAAQ;AACb,eAAK,WAAW,mBAAK;AAAA,QACtB;AAAA,MACF;AAAA,IACP,CAAK;AAED,kBAAc,QAAQ,CAAC,GAAG,UAAU,KAAK,eAAe,OAAO,OAAO,CAAC,CAAC;AAAA,EACzE;AAAA,EAED,SAAS;AACP,uBAAK,OAAQ,YAAY;AACzB,SAAK,eAAc;AAAA,EACpB;AACH;AA5DE;AACA;"}