"use strict";var st=Object.defineProperty;var $=n=>{throw TypeError(n)};var et=(n,t,i)=>t in n?st(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var Q=(n,t,i)=>et(n,typeof t!="symbol"?t+"":t,i),tt=(n,t,i)=>t.has(n)||$("Cannot "+i);var s=(n,t,i)=>(tt(n,t,"read from private field"),i?i.call(n):t.get(n)),h=(n,t,i)=>t.has(n)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,i),e=(n,t,i,r)=>(tt(n,t,"write to private field"),r?r.call(n,i):t.set(n,i),i);var it=(n,t,i,r)=>({set _(o){e(n,t,o,i)},get _(){return s(n,t,r)}});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("../Time-DqDcjPhP.js");require("uuid");const l=require("../Vector2-3guUrHSy.js"),g=require("../Text-Gg5SDpHJ.js"),ot=require("../Utils/Numeric.cjs.js"),rt=require("../TransformComponent-CbIqoe1q.js");var M,x,k,w,T,u;class ht{constructor(t=new l.Vector2,i=1,r=new l.RGB,o=null,a=null,p={}){h(this,M);h(this,x);h(this,k);h(this,w);h(this,T);h(this,u);e(this,M,t),e(this,x,i),e(this,k,r),this.angle=o,this.direction=a,e(this,u,p)}get position(){return s(this,M)}get radius(){return s(this,x)}get color(){return s(this,k)}get angle(){return s(this,w)}get direction(){return s(this,T)}get options(){return s(this,u)}set position(t){e(this,M,t)}set radius(t){e(this,x,t)}set color(t){e(this,k,t)}set angle(t){t||(t=new l.Rotation(Math.PI*2,!0)),e(this,w,t)}set direction(t){t||(t=new l.Vector2),e(this,T,t)}set options(t){e(this,u,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>(i.fillStyle=s(this,k)._toString,s(this,u).shadowBlur&&(i.shadowBlur=s(this,u).shadowBlur),s(this,u).shadowColor&&(i.shadowColor=s(this,u).shadowColor._toString),i.arc(this.position.x,this.position.y,s(this,x),s(this,T).rotation.angle-s(this,w).angle/2,s(this,T).rotation.angle+s(this,w).angle/2),s(this,w).angle%(2*Math.PI)!==0&&i.lineTo(this.position.x,this.position.y),i.fill(),s(this,u).shadowBlur&&(i.shadowBlur=0),s(this,u).shadowColor&&(i.shadowColor=""),["fillStyle"]))}}M=new WeakMap,x=new WeakMap,k=new WeakMap,w=new WeakMap,T=new WeakMap,u=new WeakMap;var C,V,m,f,y;class nt{constructor(t=new l.Vector2,i=1,r=new(s(this,m)),o=new l.Rotation(Math.PI*2,!0),a=new l.Vector2){h(this,C);h(this,V);h(this,m);h(this,f);h(this,y);e(this,C,t),e(this,V,i),e(this,m,r),e(this,f,o),e(this,y,a)}get position(){return s(this,C)}get radius(){return s(this,V)}get color(){return s(this,m)}get angle(){return s(this,f)}get direction(){return s(this,y)}set position(t){e(this,C,t)}set radius(t){e(this,V,t)}set color(t){e(this,m,t)}set angle(t){e(this,f,t)}set direction(t){e(this,y,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>{i.fillStyle=s(this,m)._toString;let r=s(this,C);return i.arc(r.x,r.y,s(this,V),s(this,y).rotation.angle-s(this,f).angle/2,s(this,y).rotation.angle+s(this,f).angle/2),s(this,f).angle%(2*Math.PI)!==0&&i.lineTo(r.x,r.y),i.fill(),["fillStyle"]})}}C=new WeakMap,V=new WeakMap,m=new WeakMap,f=new WeakMap,y=new WeakMap;var _,z,L,P,X;class lt{constructor(t=new l.Vector2,i=new l.Vector2,r=l.RGB.Fuchsia,o=5){h(this,_);h(this,z);h(this,L);h(this,P);h(this,X,0);e(this,_,t),e(this,z,i),e(this,L,r),e(this,P,o)}get from(){return s(this,_)}get to(){return s(this,z)}set from(t){e(this,_,t)}set to(t){e(this,z,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>{i.strokeStyle=s(this,L)._toString,i.lineWidth=s(this,P),i.fillStyle=s(this,L)._toString;let r=ot.clamp(s(this,P)*3,10,1e3);if(l.Vector2.from(this.from).to(this.to).length<=r){let I=s(this,X)%4<2?"#ff0000":"#ffffff";i.strokeStyle=I,i.fillStyle=I}this.to.add(l.Vector2.from(this.from).to(this.to).normalized.multiply(-r));let o=this.to.clone().add(l.Vector2.from(this.from).to(this.to).normalized.multiply(r)),a=l.Vector2.from(this.to).to(this.from).normalize(),p=r*2,K=a.clone().rotate(new l.Rotation(Math.PI*2)).multiply(p).add(this.to),q=a.clone().rotate(new l.Rotation(-Math.PI*2)).multiply(p).add(this.to);return i.moveTo(this.from.x,this.from.y),i.lineTo(this.to.x,this.to.y),i.stroke(),i.moveTo(o.x,o.y),i.lineTo(K.x,K.y),i.lineTo(q.x,q.y),i.lineTo(o.x,o.y),i.fill(),["strokeStyle","lineWidth","fillStyle"]}),it(this,X)._++}}_=new WeakMap,z=new WeakMap,L=new WeakMap,P=new WeakMap,X=new WeakMap;var W,b,G,R,v,d;class at{constructor(t=new l.Vector2,i=new l.Vector2,r=new l.RGB,o=1,a=[],p={}){h(this,W);h(this,b);h(this,G);h(this,R);h(this,v);h(this,d);e(this,W,t),e(this,b,i),e(this,G,r),e(this,R,a),e(this,v,o),e(this,d,p)}get from(){return s(this,W)}get to(){return s(this,b)}get color(){return s(this,G)}get dashes(){return s(this,R)}get thickness(){return s(this,v)}get options(){return s(this,d)}set from(t){e(this,W,t)}set to(t){e(this,b,t)}set color(t){e(this,G,t)}set dashes(t){e(this,R,t)}set thickness(t){e(this,v,t)}set options(t){e(this,d,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>{const r=s(this,R).map(o=>typeof o=="string"?parseInt(o):o);return s(this,d).shadowBlur&&(i.shadowBlur=s(this,d).shadowBlur),s(this,d).shadowColor&&(i.shadowColor=s(this,d).shadowColor._toString),i.lineCap="round",i.setLineDash(r),i.strokeStyle=this.color._toString,i.lineWidth=this.thickness,i.moveTo(this.from.x,this.from.y),i.lineTo(this.to.x,this.to.y),i.stroke(),s(this,d).shadowBlur&&(i.shadowBlur=0),s(this,d).shadowColor&&(i.shadowColor=""),["strokeStyle","setLineDash","lineWidth"]})}}W=new WeakMap,b=new WeakMap,G=new WeakMap,R=new WeakMap,v=new WeakMap,d=new WeakMap;var H,O,B,j;class ct{constructor(t=[],i=new l.RGB,r=1,o=[]){h(this,H);h(this,O);h(this,B);h(this,j);e(this,H,t),e(this,O,i),e(this,B,o),e(this,j,r)}get points(){return s(this,H)}get color(){return s(this,O)}get dashes(){return s(this,B)}get thickness(){return s(this,j)}set points(t){e(this,H,t)}set color(t){e(this,O,t)}set dashes(t){e(this,B,t)}set thickness(t){e(this,j,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>{const r=s(this,B).map(o=>typeof o=="string"?parseInt(o):o);i.lineCap="round",i.setLineDash(r),i.strokeStyle=this.color._toString,i.lineWidth=this.thickness;for(let o=0;o<this.points.length-1;o++)i.moveTo(this.points[o].x,this.points[o].y),i.lineTo(this.points[o+1].x,this.points[o+1].y);return i.moveTo(this.points[this.points.length-1].x,this.points[this.points.length-1].y),i.stroke(),["strokeStyle","setLineDash","lineWidth"]})}}H=new WeakMap,O=new WeakMap,B=new WeakMap,j=new WeakMap;class ut{constructor(){Q(this,"checkpoints",[])}save(){}back(t){}draw(t){t.ctx}}var S,E,F,N,c;class dt extends g.Img{constructor(i,r={}){super(i);h(this,S);h(this,E);h(this,F);h(this,N);Q(this,"offsetRotation");h(this,c);e(this,S,r.columns||1),e(this,E,r.rows||1),e(this,F,s(this,E)*s(this,S)||1),e(this,N,r.scale||1),this.offsetRotation=r.offsetRotation||new l.Rotation,e(this,c,0)}get current(){return s(this,c)}set current(i){e(this,c,i)}next(i=1){e(this,c,s(this,c)+i),s(this,c)>s(this,F)-1&&e(this,c,0)}prev(i=1){e(this,c,s(this,c)-i),s(this,c)<0&&e(this,c,s(this,F)-1)}draw(i,r=new rt.TransformComponent){let o=i.ctx,a=r.position,p=r.rotation;if(this.imgLoaded){let K=new l.Vector2(s(this,c)%s(this,S),Math.floor(s(this,c)/s(this,S))),q=this.img.width/s(this,S),I=this.img.height/s(this,E),Y=q*s(this,N),Z=I*s(this,N);o.save(),o.translate(a.x,a.y),o.rotate(-p.sub(this.offsetRotation).angle),o.translate(-a.x,-a.y),o.imageSmoothingEnabled=!1,o.drawImage(this.img,K.x*q,K.y*I,q,I,a.x-Y/2,a.y-Z/2,Y,Z),o.restore()}}}S=new WeakMap,E=new WeakMap,F=new WeakMap,N=new WeakMap,c=new WeakMap;var U;class gt{constructor(t,i){Q(this,"sprite");Q(this,"positions");h(this,U);this.sprite=t,this.positions=i,e(this,U,0),this.sprite.current=this.positions[this.current]}get current(){return s(this,U)}set current(t){e(this,U,t),this.sprite.current=this.positions[this.current]}next(){this.current++,this.current>=this.positions.length&&(this.current=0)}prev(){this.current--,this.current<0&&(this.current=this.positions.length-1)}draw(t,i){this.sprite.draw(t,i)}}U=new WeakMap;var A,J,D;class ft{constructor(t=new l.Vector2,i=new l.Vector2,r=new l.RGB){h(this,A);h(this,J);h(this,D);e(this,A,t),e(this,J,i),e(this,D,r)}get position(){return s(this,A)}get size(){return s(this,J)}get color(){return s(this,D)}set position(t){e(this,A,t)}set size(t){e(this,J,t)}set color(t){e(this,D,t)}draw(t){let i=t.ctx;g.Draw.draw(t,()=>(i.fillStyle=s(this,D)._toString,i.fillRect(this.position.x,this.position.y,this.size.x,this.size.y),i.fill(),["fillStyle"]))}}A=new WeakMap,J=new WeakMap,D=new WeakMap;exports.Draw=g.Draw;exports.Img=g.Img;exports.RoundSquare=g.RoundSquare;exports.Text=g.Text;exports.Circle=ht;exports.CircleScreen=nt;exports.DebugVector=lt;exports.Line=at;exports.MultiLine=ct;exports.Path=ut;exports.Sprite=dt;exports.SpriteSequence=gt;exports.Square=ft;
