"use strict";var c=Object.defineProperty;var u=(r,e,t)=>e in r?c(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var s=(r,e,t)=>u(r,typeof e!="symbol"?e+"":e,t);const h=require("./Vector2-3guUrHSy.js");require("./Time-DqDcjPhP.js");const a=require("uuid"),l=require("./TransformComponent-CbIqoe1q.js");class i{constructor(e={}){s(this,"observers");s(this,"events",{});this.observers=[],this.events=e}$on(e,t){return typeof e=="string"&&(e=[e]),e.forEach(o=>{this.isValidEvent(o),this.observers.push({event:o,callback:t})}),this}unset(e){return this.observers=this.observers.filter(function(t){if(t!==e)return t}),this}$emit(e,...t){let o=[];return this.observers.filter(n=>n.event===e).forEach(n=>{o.push(Promise.resolve(n.callback(...t)))}),Promise.all(o)}isValidEvent(e){if(this.events&&!Object.keys(this.events).includes(e))throw new Error(`Event '${e}' is not a valid event`)}}class p{constructor(...e){s(this,"uuid",a.v4());s(this,"components",new Map);s(this,"transform",new l.TransformComponent);s(this,"scene");s(this,"observer",new i({SETUP_FINISHED:"SETUP_FINISHED"}));e.forEach(t=>this.addComponent(t))}addComponent(e){e.entity=this,e.setup(),this.components.set(e.constructor,e)}removeComponent(e){this.components.delete(e.constructor)}getComponent(e){let t=e instanceof h.Component?e.constructor:e;return this.components.get(t)}update(e,t){this.loop(e,t),this.components.forEach(o=>{o.updateComponent(e,t)})}loop(e,t){}}exports.Entity=p;exports.Observer=i;
